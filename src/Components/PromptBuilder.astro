---
// Definimos las etiquetas por categor√≠a
const categories = [
  {
    id: 'sujeto',
    label: '1. Sujeto',
    tags: []
  },
  {
  id: 'tipoarte',
  label: '2. Art Type',
  tags: [

    // üì∏ REAL
    'Fotograf√≠a',
    'Fotograf√≠a Anal√≥gica',
    'Polaroid Photo',
    'Documentary Photo',

    // üéÆ 3D / CGI
    'Render 3D',
    'CGI',
    'Game Art',
    'Character Design',
    'Concept Art',
    'Isometric 3D',
    'Low Poly 3D',
    'Voxel Art',
    'Clay Render',

    // üñ•Ô∏è DIGITAL
    'Arte Digital',
    'Digital Painting',
    'Matte Painting',
    'Pixel Art',
    'Vector Art',
    'Flat Illustration',
    'Line Art',
    'Minimal Illustration',
    'Sticker Style',

    // üé® PINTURA CL√ÅSICA
    '√ìleo Cl√°sico',
    'Acuarela',
    'Acr√≠lico',
    'Gouache',
    'Pastel',
    'Carb√≥n',
    'Sketch',
    'Ink Drawing',
    'Chinese Ink Painting',
    'Fresco Painting',

    // üì∫ ANIMACI√ìN / CARTOON
    'Anime',
    'Manga Style',
    'Cartoon Style',
    'Comic Book Style',
    'Disney Style',
    'Pixar Style',
    'Chibi Style',
    'Studio Ghibli Style',

    // üèõÔ∏è ARQUITECTURA / DISE√ëO
    'Arquitectura Minimalista',
    'Interior Design',
    'Industrial Design',
    'Product Design Sketch',
    'Blueprint Drawing',

    // üåà ARTE MODERNO
    'Abstract Art',
    'Surreal Art',
    'Pop Art',
    'Street Art',
    'Graffiti Art',
    'Collage Art',
    'Glitch Art',
    'Psychedelic Art',

    // üöÄ EST√âTICAS MODERNAS
    'Cyberpunk',
    'Steampunk',
    'Futuristic Art',
    'Retrofuturism',
    'Dark Fantasy Art',
    'Fantasy Illustration',
    'Sci-Fi Art',
    'Minimalist Art'
  ]
},
  {
  id: 'estilo',
  label: '3. Photo Style',
  tags: [

    // üë§ PERSONAS
    'Retrato',
    'Fashion Photography',
    'Editorial Photography',
    'Beauty Photography',
    'Headshot Photography',
    'Lifestyle Photography',
    'Couple Photography',
    'Family Photography',
    'Wedding Photography',
    'Maternity Photography',

    // üèôÔ∏è VIDA REAL
    'Street Photography',
    'Documentary Photography',
    'Photojournalism',
    'Candid Photography',
    'Travel Photography',
    'Event Photography',
    'Concert Photography',
    'Sports Photography',

    // üåÑ NATURALEZA
    'Paisaje',
    'Seascape Photography',
    'Forest Photography',
    'Mountain Photography',
    'Sunset Photography',
    'Night Photography',
    'Astrophotography',
    'Wildlife Photography',

    // üõçÔ∏è COMERCIAL
    'Fotograf√≠a de Producto',
    'Advertising Photography',
    'Catalog Photography',
    'E-commerce Photography',
    'Still Life Photography',
    'Flat Lay Photography',
    'Luxury Product Photography',

    // üçî COMIDA
    'Fotograf√≠a de Comida',
    'Food Styling Photography',
    'Restaurant Photography',
    'Top View Food Photography',
    'Dark Food Photography',

    // üè† ARQUITECTURA
    'Fotograf√≠a Inmobiliaria',
    'Interior Photography',
    'Architecture Photography',
    'Minimalist Interior Photography',
    'Drone Photography',
    'Aerial Photography',

    // üî¨ DETALLE
    'Macro Photography',
    'Close-Up Photography',
    'Texture Photography',

    // üåô ART√çSTICO
    'Fine Art Photography',
    'Conceptual Photography',
    'Surreal Photography',
    'Cinematic Photography',
    'Black and White Photography',
    'Minimalist Photography',
    'Vintage Photography'
  ]
},
  {
  id: 'tecnica',
  label: '5. Lighting / Technique',
  tags: [

    // üåÖ MOMENTO DEL D√çA
    'Golden Hour',
    'Blue Hour',
    'Sunset Light',
    'Sunrise Light',
    'Midday Light',
    'Night Photography',

    // üí° TIPOS DE LUZ
    'Natural Light',
    'Studio Light',
    'Soft Light',
    'Hard Light',
    'Diffused Light',
    'Directional Light',
    'Side Lighting',
    'Top Lighting',
    'Rim Light',
    'Backlight',
    'Front Lighting',
    'Spotlight',
    'Volumetric Lighting',

    // üé® LUZ CL√ÅSICA DE RETRATO
    'Rembrandt Lighting',
    'Butterfly Lighting',
    'Split Lighting',
    'Loop Lighting',
    'High Key Lighting',
    'Low Key Lighting',

    // üåà EFECTOS MODERNOS
    'Neon Glow',
    'RGB Lighting',
    'Color Gel Lighting',
    'Cinematic Lighting',
    'Dramatic Lighting',
    'Softbox Lighting',
    'Ring Light',
    'Lens Flare',
    'Light Leaking',

    // üß™ T√âCNICAS DE FOTO
    'Long Exposure',
    'Motion Blur',
    'Shallow Depth of Field',
    'Deep Depth of Field',
    'Bokeh',
    'HDR',
    'Focus Stacking',
    'Panorama Shot',
    'Time-lapse Effect',

    // üéÆ T√âCNICAS 3D
    'Ray Tracing',
    'Global Illumination',
    'Ambient Occlusion',
    'Subsurface Scattering',
    'Physically Based Rendering',
    'Volumetric Fog',
    'Bloom Effect'
  ]
},
  {
  id: 'mood',
  label: '4. Mood / Aesthetic',
  tags: [

    // üé¨ CINE
    'Cinematic',
    'Dramatic',
    'Epic',
    'Emotional',
    'Romantic',
    'Mystery',
    'Suspense',
    'Film Noir',
    'Dark Fantasy',

    // üåô TONO / ATM√ìSFERA
    'Moody',
    'Dreamy',
    'Soft',
    'Warm',
    'Cold',
    'Dark',
    'Bright',
    'Melancholic',
    'Peaceful',
    'Energetic',
    'Whimsical',
    'Magical',
    'Ethereal',

    // üé® ARTE / EST√âTICA
    'Surreal',
    'Minimalist',
    'Vintage',
    'Retro 80s',
    'Retro 90s',
    'Y2K Aesthetic',
    'Boho Style',
    'Grunge Style',
    'Pastel Colors',
    'Muted Colors',
    'Neon Style',
    'Monochrome',

    // üì± INTERNET / PINTEREST
    'Instagram Aesthetic',
    'Tumblr Style',
    'Clean Girl Aesthetic',
    'Soft Girl Aesthetic',
    'VSCO Style',
    'Pinterest Style',

    // üåø EST√âTICAS DE MODA / CULTURA
    'Dark Academia',
    'Light Academia',
    'Cottagecore',
    'Royalcore',
    'Goblincore',
    'Fairycore',
    'Barbiecore',
    'Old Money Style',
    'High Fashion',
    'Street Style',

    // üåç NATURALEZA / TURISMO
    'Summer Vibes',
    'Winter Mood',
    'Golden Hour Mood',
    'Blue Hour Mood',
    'Cozy Atmosphere',
    'Beach Vibes',
    'Forest Mood',

    // ‚ú® EXTRA PODEROSOS
    'Luxury Mood',
    'Cute Style',
    'Playful',
    'Elegant',
    'Minimal Luxury',
    'Futuristic',
    'Cyberpunk Mood'
  ]
},
  {
  id: 'camara',
  label: '6. Camera / Engine',
  tags: [

    // üì∏ LENTES CL√ÅSICOS
    '35mm Lens',
    '50mm Lens',
    '85mm Lens',
    '135mm Lens',
    '200mm Lens',
    '24mm Wide Angle',
    'Ultra Wide Angle',
    'Macro Lens',
    'Tilt Shift Lens',
    'Fish Eye Lens',

    // üé¨ EFECTOS DE LENTE
    'Shallow Depth of Field',
    'Deep Focus',
    'Soft Focus',
    'Bokeh Lens',
    'Motion Blur',
    'Long Exposure Lens',
    'HDR Capture',
    'Panorama Shot',

    // üöÅ TIPO DE TOMA
    'Drone Shot',
    'Aerial Shot',
    'Top View Shot',
    'Low Angle Shot',
    'High Angle Shot',
    'Close Up Shot',
    'Extreme Close Up',
    'Overhead Shot',
    'POV Shot',

    // üì∑ C√ÅMARAS REALES (PRO)
    'Canon EOS R5',
    'Canon 5D Mark IV',
    'Sony A7 IV',
    'Sony A7R V',
    'Nikon Z8',
    'Nikon D850',
    'Fujifilm X-T5',
    'Leica Q2',
    'Hasselblad X2D',

    // üéûÔ∏è FILM ANAL√ìGICO
    'Kodak Portra Film',
    'Kodak Gold Film',
    'Fujifilm Velvia Film',
    'Fujifilm Provia Film',
    'Polaroid Film',
    'Ilford Black and White Film',

    // üéÆ MOTORES 3D
    'Unreal Engine 5',
    'Octane Render',
    'V-Ray',
    'Cycles Render',
    'Redshift Render',
    'Arnold Render',
    'Blender Eevee',
    'Cinema 4D Render',

    // ‚ú® EXTRA REALISMO
    'Shot on iPhone',
    'Vintage Camera',
    'Disposable Camera',
    'GoPro Camera',
    '4K Video Frame',
    '8K Cinema Camera'
  ]
},
  {
  id: 'calidad',
  label: '7. Quality',
  tags: [

    // üîé DETALLE
    'Highly Detailed',
    'Intricate Details',
    'Ultra Detailed',
    'Extreme Detail',
    'Fine Details',
    'Sharp Focus',
    'Ultra Sharp Focus',
    'Crisp Details',

    // üì∫ RESOLUCI√ìN
    '4K Resolution',
    '8K Resolution',
    '16K Resolution',
    'Ultra High Resolution',
    'HD Quality',
    'Studio Quality',

    // üß† REALISMO
    'Hyper-realistic',
    'Photorealistic',
    'Ultra Realistic',
    'True to Life',
    'Realistic Texture',
    'Realistic Shadows',
    'Natural Skin Texture',
    'Photorealistic Skin',
    'Realistic Lighting',
    'Global Illumination',

    // üì∑ FOTO PROFESIONAL
    'Raw Photo',
    'Professional Photography',
    'Professional Lighting',
    'Studio Shot',
    'Perfect Exposure',
    'Balanced Colors',
    'Color Graded',
    'High Dynamic Range',

    // ‚ú® ACABADO FINAL
    'Masterpiece',
    'Award Winning Photo',
    'Portfolio Quality',
    'Magazine Quality',
    'Commercial Quality',
    'Print Ready',
    'Luxury Finish',
    'Clean Background',
    'No Noise',
    'No Grain'
  ]
}
];
---
<div class="flex">
  
  <!-- BOTON MOBILE -->
<button id="toggleHistory"
  class="fixed top-4 left-4 z-50 bg-white shadow-lg p-2 md:hidden">
  ‚ò∞ Historial
</button>

<!-- MINI SIDEBAR (tipo ChatGPT) -->
<div id="miniSidebar"
  class="fixed top-0 left-0 h-full w-10 bg-white shadow-xl
         flex items-start justify-center pt-4 z-50 invisible">

  <button id="expandHistory"
    class="text-slate-500 hover:text-indigo-600 text-xl">
    ‚û°
  </button>
</div>

<!-- SIDEBAR HISTORIAL -->
<div id="historyPanel"
  class="fixed top-0 left-0 h-full w-72 bg-white shadow-xl
         transform -translate-x-full md:translate-x-0
         transition-transform duration-300 z-40">

  <div class="p-4 font-bold flex justify-between items-center border-b">
    üïí Historial

    <div class="flex gap-2 items-center">
      <!-- cerrar mobile -->
      <button id="closeHistory" class="md:hidden">‚úñ</button>

      <!-- colapsar desktop -->
      <button id="collapseHistory"
        class="text-slate-500 hover:text-indigo-600 text-lg transition">
        ‚¨Ö
      </button>
    </div>
  </div>

  <div id="history"
    class="overflow-y-auto h-full p-2 text-sm">
  </div>
</div>


<div class="max-w-5xl mx-auto p-6 bg-slate-50 rounded-2xl shadow-xl border border-slate-200 mt-10">
  


  <h2 class="text-3xl font-bold text-slate-800 mb-6 text-center">AI Prompt Builder üöÄ</h2>
  
  <div class="space-y-8">
  {categories.map((cat) => (
    <div class="category-group" data-category={cat.id}>
      <h3 class="text-sm font-bold uppercase tracking-wider text-slate-500 mb-3">{cat.label}</h3>
      
      {cat.id === 'sujeto' ? (
        /* Renderizamos el INPUT para el sujeto */
        <input 
          type="text" 
          id="sujeto-input"
          placeholder="Ej: Un astronauta montando un unicornio..."
          class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all text-slate-700"
        />
      ) : (
        /* Mantenemos los BOTONES para el resto de categor√≠as */
        <div class="flex flex-wrap gap-2">
          {cat.tags.map((tag) => (
            <button 
              type="button"
              class="tag-btn px-4 py-2 rounded-full border border-slate-300 bg-white text-slate-600 hover:border-indigo-500 hover:text-indigo-500 transition-all cursor-pointer text-sm font-medium active:scale-95"
              data-tag={tag}
            >
              {tag}
            </button>
          ))}
        </div>
      )}
    </div>
  ))}
</div>

  <div class="mt-10 p-6 bg-indigo-900 rounded-xl text-white shadow-inner relative">
    <label class="text-xs uppercase font-bold text-indigo-300 block mb-2">Prompt Generado:</label>
    <p id="result-prompt" class="text-lg italic min-h-[1.5rem] pr-20">Selecciona etiquetas arriba...</p>
    <button 
      id="copy-btn" 
      class="absolute right-4 bottom-4 bg-indigo-500 hover:bg-indigo-400 text-white px-3 py-1 rounded text-sm transition-colors hidden"
    >
      Copiar
    </button>
  </div>

 <div class="flex gap-4 mt-6">
  <button 
    id="reset-btn"
    class="flex-1 bg-slate-200 hover:bg-slate-300 text-slate-700 font-bold py-4 rounded-xl transition-all active:scale-[0.98]"
  >
    Limpiar Todo
  </button>
  
  <button 
    id="submit-btn"
    class="flex-[2] bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 rounded-xl transition-all shadow-lg hover:shadow-indigo-200 active:scale-[0.98]"
  >
    Generar Prompt
  </button>
</div>
</div>
</div>
<script>
  const selectedTags = {
    sujeto: '',
    tipoarte: '',
    estilo: '',
    tecnica: '',
    mood: '',
    camara: '',
    calidad: '',

  };

  // Mapeo de IDs a nombres legibles para el prompt final
  const categoryLabels = {
      sujeto: 'Subject',
      tipoarte: 'Art Type',
      estilo: 'Photo Style',
      mood: 'Mood',
      tecnica: 'Lighting / Technique',
      camara: 'Camera / Engine',
      calidad: 'Quality'
  };

  const sujetoInput = document.getElementById('sujeto-input');
  const groups = document.querySelectorAll('.category-group');
  
  // L√≥gica para botones de categor√≠as
  groups.forEach(group => {
    const category = group.getAttribute('data-category');
    if (category === 'sujeto') return;

    const buttons = group.querySelectorAll('.tag-btn');
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        buttons.forEach(b => b.classList.remove('bg-indigo-600', 'text-white', 'border-indigo-600'));
        btn.classList.add('bg-indigo-600', 'text-white', 'border-indigo-600');
        selectedTags[category] = btn.getAttribute('data-tag');
      });
    });
  });

  const submitBtn = document.getElementById('submit-btn');
  const resultDisplay = document.getElementById('result-prompt');
  const copyBtn = document.getElementById('copy-btn');

  // BOT√ìN SUBMIT CORREGIDO
  submitBtn.addEventListener('click', () => {
    // Actualizamos el sujeto desde el input
    selectedTags.sujeto = sujetoInput.value.trim();

    // Construimos el prompt combinando Categor√≠a + Valor
    const finalPrompt = Object.keys(selectedTags)
      .filter(key => selectedTags[key] !== '') // Solo procesamos si hay algo seleccionado/escrito
      .map(key => `${categoryLabels[key]}: ${selectedTags[key]}`) // Formato "Subject: Perro"
      .join(' | '); // Separador visual (puedes cambiarlo por coma si prefieres)

    if (finalPrompt) {
      resultDisplay.innerText = finalPrompt;
      copyBtn.classList.remove('hidden');
      savePromptToHistory(finalPrompt);
      renderHistory();
  } else {
      resultDisplay.innerText = "Escribe un sujeto y elige etiquetas.";
      copyBtn.classList.add('hidden');
    }
  });

  // Bot√≥n Reset
  const resetBtn = document.getElementById('reset-btn');
  resetBtn.addEventListener('click', () => {
    if (sujetoInput) sujetoInput.value = ''; 
    for (let key in selectedTags) { selectedTags[key] = ''; }
    document.querySelectorAll('.tag-btn').forEach(btn => {
      btn.classList.remove('bg-indigo-600', 'text-white', 'border-indigo-600');
    });
    resultDisplay.innerText = "Selecciona etiquetas arriba...";
    copyBtn.classList.add('hidden');
  });

  // Bot√≥n Copiar
  copyBtn.addEventListener('click', () => {
    navigator.clipboard.writeText(resultDisplay.innerText);
    const originalText = copyBtn.innerText;
    copyBtn.innerText = "¬°Copiado!";
    setTimeout(() => copyBtn.innerText = originalText, 2000);
  });

  // ----- HISTORIAL PROMPTS -----

function savePromptToHistory(prompt) {
  let history = JSON.parse(localStorage.getItem("promptHistory")) || [];
  history.unshift({
    text: prompt,
    date: new Date().toLocaleString()
  });

  history = history.slice(0, 30); // m√°ximo 30 prompts
  localStorage.setItem("promptHistory", JSON.stringify(history));
}

function loadHistory() {
  return JSON.parse(localStorage.getItem("promptHistory")) || [];
}

function renderHistory() {
  const historyDiv = document.getElementById("history");
  if (!historyDiv) return;

  const history = loadHistory();
  historyDiv.innerHTML = history
    .map(item => `<div class="p-2 rounded-2xl cursor-pointer hover:bg-slate-100"
          onclick="usePrompt('${item.text.replace(/'/g, "\\'")}')">
          ${item.text}
        </div>`)
    .join("");
}

function usePrompt(text) {
  document.getElementById("result-prompt").innerText = text;
}

renderHistory();

document.addEventListener("DOMContentLoaded", () => {

  const panel = document.getElementById("historyPanel");
  const toggleBtn = document.getElementById("toggleHistory");
  const closeBtn = document.getElementById("closeHistory");
  const collapseBtn = document.getElementById("collapseHistory");
  const miniSidebar = document.getElementById("miniSidebar");
  const expandBtn = document.getElementById("expandHistory");

  // -------- MOBILE abrir
  toggleBtn?.addEventListener("click", () => {
    panel.classList.remove("-translate-x-full");
  });

  // -------- MOBILE cerrar
  closeBtn?.addEventListener("click", () => {
    panel.classList.add("-translate-x-full");
  });

  // -------- DESKTOP colapsar
  collapseBtn?.addEventListener("click", () => {
    panel.classList.add("-translate-x-full");
    miniSidebar.classList.remove("invisible");
  });

  // -------- DESKTOP expandir
  expandBtn?.addEventListener("click", () => {
    panel.classList.remove("-translate-x-full");
    miniSidebar.classList.add("hidden");
  });

});

</script>
